<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="max-image-preview:large">
    <meta name="naver-site-verification" content="naver0f894086393482efed7c1ac0a16062e5" />
    <meta name="google-adsense-account" content="ca-pub-3600813755953882">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3600813755953882" crossorigin="anonymous"></script>

    <!-- SEO Meta Tags -->
    <title>DopaBrain - ê²Œì„, í€´ì¦ˆ, ì‹¬ë¦¬í…ŒìŠ¤íŠ¸ | ë¬´ë£Œ ì˜¨ë¼ì¸</title>
    <meta name="description" content="ì¤‘ë…ì„± ê²Œì„, ì‹¬ë¦¬í…ŒìŠ¤íŠ¸, í€´ì¦ˆ, ê³„ì‚°ê¸° ë“± ë‹¤ì–‘í•œ ë¬´ë£Œ ì½˜í…ì¸ ! ì„¤ì¹˜ ì—†ì´ ë°”ë¡œ ì¦ê¸°ì„¸ìš”.">
    <meta name="keywords" content="ì˜¨ë¼ì¸ ê²Œì„, ì‹¬ë¦¬í…ŒìŠ¤íŠ¸, í€´ì¦ˆ, ê³„ì‚°ê¸°, ìš´ì„¸, MBTI, ë¡œë˜, ë°”ì´ëŸ´ í…ŒìŠ¤íŠ¸">
    <meta name="author" content="DopaBrain">
    <link rel="canonical" href="https://dopabrain.com/">

    <!-- Open Graph -->
    <meta property="og:title" content="DopaBrain - ê²Œì„, í€´ì¦ˆ, ì‹¬ë¦¬í…ŒìŠ¤íŠ¸">
    <meta property="og:description" content="ì¤‘ë…ì„± ê²Œì„, ì‹¬ë¦¬í…ŒìŠ¤íŠ¸, í€´ì¦ˆ ë“± ë‹¤ì–‘í•œ ë¬´ë£Œ ì½˜í…ì¸ !">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://dopabrain.com/">
    <meta property="og:locale" content="ko_KR">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="DopaBrain - ê²Œì„, í€´ì¦ˆ, ì‹¬ë¦¬í…ŒìŠ¤íŠ¸">
    <meta name="twitter:description" content="ì¤‘ë…ì„± ê²Œì„, ì‹¬ë¦¬í…ŒìŠ¤íŠ¸, í€´ì¦ˆ ë“± ë‹¤ì–‘í•œ ë¬´ë£Œ ì½˜í…ì¸ !">

    <meta name="theme-color" content="#030014">

    <!-- Schema.org - Enhanced Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebSite",
        "name": "DopaBrain",
        "alternateName": "ë„íŒŒë¸Œë ˆì¸",
        "description": "ë¬´ë£Œ ì˜¨ë¼ì¸ ê²Œì„, ì‹¬ë¦¬í…ŒìŠ¤íŠ¸, í€´ì¦ˆ, ê³„ì‚°ê¸° ë“± 24ê°€ì§€ ì½˜í…ì¸ . ì„¤ì¹˜ ì—†ì´ ë°”ë¡œ ì¦ê¸°ëŠ” ë„íŒŒë¯¼ ìê·¹ í”Œë«í¼",
        "url": "https://dopabrain.com/",
        "inLanguage": ["ko", "en"],
        "isAccessibleForFree": true,
        "image": "https://dopabrain.com/og-image.png",
        "potentialAction": {
            "@type": "SearchAction",
            "target": {
                "@type": "EntryPoint",
                "urlTemplate": "https://dopabrain.com/portal/?q={search_term_string}"
            },
            "query-input": "required name=search_term_string"
        },
        "publisher": {
            "@type": "Organization",
            "name": "DopaBrain",
            "url": "https://dopabrain.com/",
            "logo": "https://dopabrain.com/favicon.ico",
            "sameAs": [
                "https://github.com/swp1234"
            ],
            "contact": {
                "@type": "ContactPoint",
                "contactType": "Customer Support",
                "url": "https://dopabrain.com/portal/privacy-policy.html"
            }
        },
        "mainEntity": {
            "@type": "Organization",
            "name": "DopaBrain",
            "url": "https://dopabrain.com/"
        },
        "hasPart": [
            {
                "@type": "WebPageElement",
                "@id": "https://dopabrain.com/#navigation",
                "isPartOf": {
                    "@id": "https://dopabrain.com/"
                }
            }
        ]
    }
    </script>

    <!-- SiteNavigationElement - Main Navigation Structure -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "SiteNavigationElement",
        "name": "DopaBrain ì£¼ìš” ì¹´í…Œê³ ë¦¬",
        "url": "https://dopabrain.com/",
        "hasPart": [
            {
                "@type": "SiteNavigationElement",
                "name": "ê²Œì„",
                "url": "https://dopabrain.com/portal/#quiz"
            },
            {
                "@type": "SiteNavigationElement",
                "name": "ì‹¬ë¦¬í…ŒìŠ¤íŠ¸",
                "url": "https://dopabrain.com/portal/#fortune"
            },
            {
                "@type": "SiteNavigationElement",
                "name": "ë„êµ¬",
                "url": "https://dopabrain.com/portal/#tool"
            },
            {
                "@type": "SiteNavigationElement",
                "name": "ë¼ì´í”„",
                "url": "https://dopabrain.com/portal/#life"
            },
            {
                "@type": "SiteNavigationElement",
                "name": "ì „ì²´ ì½˜í…ì¸ ",
                "url": "https://dopabrain.com/portal/"
            }
        ]
    }
    </script>

    <!-- BreadcrumbList - Homepage Breadcrumb -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "BreadcrumbList",
        "itemListElement": [
            {
                "@type": "ListItem",
                "position": 1,
                "name": "DopaBrain",
                "item": "https://dopabrain.com/"
            }
        ]
    }
    </script>

    <!-- CollectionPage - Portal Page Metadata -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "CollectionPage",
        "name": "DopaBrain - ê²Œì„, ì‹¬ë¦¬í…ŒìŠ¤íŠ¸, ë„êµ¬ ëª¨ìŒ",
        "url": "https://dopabrain.com/portal/",
        "description": "ë¬´ë£Œ ì˜¨ë¼ì¸ ê²Œì„, ì‹¬ë¦¬í…ŒìŠ¤íŠ¸, í€´ì¦ˆ, ê³„ì‚°ê¸° ë“± 24ê°€ì§€ ì½˜í…ì¸  ëª¨ìŒ",
        "about": {
            "@type": "Thing",
            "name": "ë„íŒŒë¯¼ ìê·¹ ì½˜í…ì¸  í”Œë«í¼"
        },
        "mainEntity": {
            "@type": "Organization",
            "name": "DopaBrain"
        }
    }
    </script>

    <!-- Organization Schema (2026 E-E-A-T Optimized) -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Organization",
        "name": "DopaBrain",
        "alternateName": "ë„íŒŒë¸Œë ˆì¸",
        "url": "https://dopabrain.com/",
        "logo": {
            "@type": "ImageObject",
            "url": "https://dopabrain.com/favicon.ico",
            "width": "512",
            "height": "512"
        },
        "description": "ë¬´ë£Œ ì˜¨ë¼ì¸ ê²Œì„, ì‹¬ë¦¬í…ŒìŠ¤íŠ¸, í€´ì¦ˆ, ê³„ì‚°ê¸° ë“± ë„íŒŒë¯¼ ìê·¹ ì½˜í…ì¸  í”Œë«í¼",
        "founder": {
            "@type": "Person",
            "name": "DopaBrain Team",
            "jobTitle": "ê°œë°œì"
        },
        "foundingDate": "2026",
        "sameAs": [
            "https://github.com/swp1234"
        ],
        "contactPoint": {
            "@type": "ContactPoint",
            "contactType": "ê³ ê° ì§€ì›",
            "url": "https://dopabrain.com/portal/privacy-policy.html",
            "availableLanguage": ["ko", "en", "zh", "hi", "ru"]
        },
        "knowsAbout": ["ê²Œì„ ê°œë°œ", "ì‹¬ë¦¬í…ŒìŠ¤íŠ¸", "ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜", "PWA"],
        "slogan": "ë„íŒŒë¯¼ ìê·¹, ë¬´ë£Œ ì½˜í…ì¸ ",
        "areaServed": {
            "@type": "Place",
            "name": "ì „ ì„¸ê³„"
        }
    }
    </script>

    <style>
        *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #030014;
            color: #f0f0ff;
            min-height: 100vh;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
        }

        /* Background orbs */
        .bg-effects { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 0; overflow: hidden; }
        .bg-orb { position: absolute; border-radius: 50%; filter: blur(100px); opacity: 0.35; animation: orbFloat 25s ease-in-out infinite; }
        .bg-orb-1 { width: 500px; height: 500px; background: radial-gradient(circle, rgba(139,92,246,0.4), transparent); top: -150px; right: -150px; }
        .bg-orb-2 { width: 400px; height: 400px; background: radial-gradient(circle, rgba(6,182,212,0.3), transparent); bottom: 10%; left: -120px; animation-delay: -8s; }
        .bg-orb-3 { width: 350px; height: 350px; background: radial-gradient(circle, rgba(236,72,153,0.25), transparent); top: 40%; right: -80px; animation-delay: -16s; }
        @keyframes orbFloat {
            0%, 100% { transform: translate(0,0) scale(1); }
            25% { transform: translate(40px,-40px) scale(1.08); }
            50% { transform: translate(-30px,30px) scale(0.92); }
            75% { transform: translate(25px,15px) scale(1.04); }
        }

        .container {
            position: relative; z-index: 1;
            max-width: 800px; margin: 0 auto;
            padding: 40px 20px 60px;
            text-align: center;
        }

        /* Header */
        .logo-icon {
            font-size: 56px;
            animation: brainPulse 3s ease-in-out infinite;
            filter: drop-shadow(0 0 16px rgba(139,92,246,0.6));
            margin-bottom: 8px;
        }
        @keyframes brainPulse {
            0%, 100% { filter: drop-shadow(0 0 16px rgba(139,92,246,0.6)); transform: scale(1); }
            50% { filter: drop-shadow(0 0 30px rgba(6,182,212,0.8)) drop-shadow(0 0 50px rgba(139,92,246,0.4)); transform: scale(1.1); }
        }

        h1 {
            font-size: 42px; font-weight: 800;
            background: linear-gradient(135deg, #c084fc, #22d3ee, #f472b6);
            background-size: 200% 200%;
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: gradientShift 4s ease infinite;
            margin-bottom: 6px;
        }
        @keyframes gradientShift { 0%,100% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } }

        .tagline {
            font-size: 12px; color: #06b6d4; font-weight: 600;
            letter-spacing: 3px; text-transform: uppercase; margin-bottom: 12px;
        }
        .subtitle { font-size: 15px; color: #5a5580; margin-bottom: 32px; }

        /* Category quick links */
        .quick-cats {
            display: flex; gap: 10px; justify-content: center;
            flex-wrap: wrap; margin-bottom: 36px;
        }
        .quick-cat {
            padding: 10px 20px;
            background: rgba(139,92,246,0.08);
            border: 1px solid rgba(139,92,246,0.15);
            border-radius: 100px;
            color: #a5a0d0; font-size: 14px; font-weight: 500;
            text-decoration: none;
            transition: all 0.3s ease;
            min-height: 44px; display: flex; align-items: center; gap: 6px;
        }
        .quick-cat:hover {
            background: rgba(139,92,246,0.18);
            border-color: rgba(139,92,246,0.35);
            color: #f0f0ff;
            transform: translateY(-2px);
            box-shadow: 0 4px 16px rgba(139,92,246,0.15);
        }

        /* App grid */
        .app-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-bottom: 36px;
            text-align: left;
        }

        .app-card {
            display: flex; align-items: center; gap: 12px;
            padding: 14px 16px;
            background: rgba(139,92,246,0.04);
            border: 1px solid rgba(139,92,246,0.1);
            border-radius: 14px;
            text-decoration: none; color: #f0f0ff;
            transition: all 0.3s cubic-bezier(0.4,0,0.2,1);
            min-height: 60px;
        }
        .app-card:hover {
            transform: translateY(-3px);
            border-color: var(--c, rgba(139,92,246,0.3));
            box-shadow: 0 6px 24px rgba(0,0,0,0.3), 0 0 20px color-mix(in srgb, var(--c,#8b5cf6) 15%, transparent);
        }
        .app-card:active { transform: translateY(-1px) scale(0.98); }

        .app-icon {
            width: 42px; height: 42px;
            border-radius: 10px;
            display: flex; align-items: center; justify-content: center;
            font-size: 20px; flex-shrink: 0;
            border: 1px solid rgba(139,92,246,0.1);
        }
        .app-name { font-size: 14px; font-weight: 600; line-height: 1.3; }
        .app-desc { font-size: 11px; color: #a5a0d0; margin-top: 2px; }

        .badge-hot {
            display: inline-block;
            padding: 1px 6px; border-radius: 100px;
            font-size: 9px; font-weight: 700;
            background: linear-gradient(135deg, #ec4899, #f472b6);
            color: #fff; margin-left: 4px; vertical-align: middle;
        }

        /* Section title */
        .section-title {
            font-size: 18px; font-weight: 700;
            background: linear-gradient(135deg, #c084fc, #22d3ee);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 16px; text-align: left;
        }

        /* CTA */
        .cta-link {
            display: inline-block;
            padding: 14px 32px;
            background: linear-gradient(135deg, #8b5cf6, #06b6d4);
            border-radius: 100px;
            color: #fff; font-size: 15px; font-weight: 600;
            text-decoration: none;
            transition: all 0.3s ease;
            box-shadow: 0 4px 20px rgba(139,92,246,0.3);
        }
        .cta-link:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 28px rgba(139,92,246,0.4);
        }

        /* Footer */
        .footer {
            margin-top: 40px; padding-top: 20px;
            border-top: 1px solid rgba(139,92,246,0.1);
            font-size: 12px; color: #5a5580;
        }
        .footer a { color: #a5a0d0; text-decoration: none; }
        .footer a:hover { color: #c084fc; }

        /* Stats Row */
        .stats-row {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 12px;
            margin-bottom: 36px;
        }
        .stat-box {
            text-align: center;
            padding: 16px 8px;
            background: rgba(139,92,246,0.06);
            border: 1px solid rgba(139,92,246,0.12);
            border-radius: 16px;
            transition: all 0.3s ease;
        }
        .stat-box:hover {
            transform: translateY(-2px);
            border-color: rgba(139,92,246,0.3);
            box-shadow: 0 4px 16px rgba(139,92,246,0.12);
        }
        .stat-num {
            font-size: 24px;
            font-weight: 800;
            background: linear-gradient(135deg, #c084fc, #22d3ee);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .stat-desc {
            font-size: 11px;
            color: #5a5580;
            margin-top: 4px;
        }

        /* CTA Section */
        .cta-section {
            text-align: center;
            margin: 36px 0;
            padding: 32px 20px;
            background: rgba(139,92,246,0.05);
            border: 1px solid rgba(139,92,246,0.12);
            border-radius: 20px;
        }
        .cta-desc {
            font-size: 14px;
            color: #a5a0d0;
            margin-bottom: 16px;
        }

        /* Responsive */
        @media (max-width: 480px) {
            .app-grid { grid-template-columns: 1fr; }
            h1 { font-size: 32px; }
            .container { padding: 24px 16px 40px; }
            .stats-row { grid-template-columns: repeat(2, 1fr); }
            .stat-num { font-size: 20px; }
        }
        @media (min-width: 600px) {
            .app-grid { grid-template-columns: repeat(3, 1fr); }
        }

        /* Language Selector */
        .language-selector { position: fixed; top: 20px; right: 20px; z-index: 1000; }
        .lang-btn { background: rgba(139,92,246,0.3); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); border: 1px solid rgba(139,92,246,0.4); color: #fff; font-size: 20px; width: 44px; height: 44px; border-radius: 50%; cursor: pointer; transition: all 0.2s ease; }
        .lang-btn:hover { background: rgba(139,92,246,0.5); transform: scale(1.05); }
        .lang-menu { position: absolute; top: 52px; right: 0; background: rgba(3,0,20,0.95); backdrop-filter: blur(20px); border: 1px solid rgba(139,92,246,0.3); border-radius: 12px; padding: 8px; min-width: 150px; box-shadow: 0 8px 24px rgba(0,0,0,0.4); }
        .lang-menu.hidden { display: none; }
        .lang-option { width: 100%; padding: 10px 14px; background: transparent; border: none; text-align: left; cursor: pointer; border-radius: 8px; font-size: 14px; color: #a5a0d0; transition: background 0.2s; }
        .lang-option:hover { background: rgba(139,92,246,0.2); color: #f0f0ff; }
        .lang-option.active { background: rgba(139,92,246,0.3); font-weight: 600; color: #f0f0ff; }
    </style>
</head>
<body>
    <div class="bg-effects">
        <div class="bg-orb bg-orb-1"></div>
        <div class="bg-orb bg-orb-2"></div>
        <div class="bg-orb bg-orb-3"></div>
    </div>

    <div class="container">
        <div class="language-selector">
            <button id="lang-toggle" class="lang-btn" aria-label="Language">ğŸŒ</button>
            <div id="lang-menu" class="lang-menu hidden">
                <button class="lang-option" data-lang="ko" data-i18n="languages.ko">ğŸ‡°ğŸ‡· í•œêµ­ì–´</button>
                <button class="lang-option" data-lang="en" data-i18n="languages.en">ğŸ‡ºğŸ‡¸ English</button>
                <button class="lang-option" data-lang="ja" data-i18n="languages.ja">ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª</button>
                <button class="lang-option" data-lang="es" data-i18n="languages.es">ğŸ‡ªğŸ‡¸ EspaÃ±ol</button>
                <button class="lang-option" data-lang="pt" data-i18n="languages.pt">ğŸ‡§ğŸ‡· PortuguÃªs</button>
                <button class="lang-option" data-lang="zh" data-i18n="languages.zh">ğŸ‡¨ğŸ‡³ ç®€ä½“ä¸­æ–‡</button>
                <button class="lang-option" data-lang="id" data-i18n="languages.id">ğŸ‡®ğŸ‡© Bahasa Indonesia</button>
                <button class="lang-option" data-lang="tr" data-i18n="languages.tr">ğŸ‡¹ğŸ‡· TÃ¼rkÃ§e</button>
                <button class="lang-option" data-lang="de" data-i18n="languages.de">ğŸ‡©ğŸ‡ª Deutsch</button>
                <button class="lang-option" data-lang="fr" data-i18n="languages.fr">ğŸ‡«ğŸ‡· FranÃ§ais</button>
                <button class="lang-option" data-lang="hi" data-i18n="languages.hi">ğŸ‡®ğŸ‡³ à¤¹à¤¿à¤¨à¥à¤¦à¥€</button>
                <button class="lang-option" data-lang="ru" data-i18n="languages.ru">ğŸ‡·ğŸ‡º Ğ ÑƒÑÑĞºĞ¸Ğ¹</button>
            </div>
        </div>

        <div class="logo-icon">ğŸ§ </div>
        <h1>DopaBrain</h1>
        <p class="tagline" data-i18n="header.tagline">Games & Tests & Tools</p>
        <p class="subtitle" data-i18n="header.subtitle">ì¤‘ë…ì„± ê²Œì„, ì‹¬ë¦¬í…ŒìŠ¤íŠ¸, í€´ì¦ˆ ë“± ë„íŒŒë¯¼ ìê·¹ ì½˜í…ì¸ </p>

        <!-- Category quick links -->
        <div class="quick-cats">
            <a href="/portal/#quiz" class="quick-cat" data-i18n="categories.games">ğŸ® ê²Œì„</a>
            <a href="/portal/#fortune" class="quick-cat" data-i18n="categories.tests">ğŸ”® ì‹¬ë¦¬í…ŒìŠ¤íŠ¸</a>
            <a href="/portal/#tool" class="quick-cat" data-i18n="categories.tools">ğŸ§® ë„êµ¬</a>
            <a href="/portal/#life" class="quick-cat" data-i18n="categories.life">ğŸ§˜ ë¼ì´í”„</a>
        </div>

        <!-- Stats Section -->
        <div class="stats-row">
            <div class="stat-box">
                <div class="stat-num" id="stat-count">24+</div>
                <div class="stat-desc" data-i18n="stats.content">ë¬´ë£Œ ì½˜í…ì¸ </div>
            </div>
            <div class="stat-box">
                <div class="stat-num">5</div>
                <div class="stat-desc" data-i18n="stats.categories">ì¹´í…Œê³ ë¦¬</div>
            </div>
            <div class="stat-box">
                <div class="stat-num">100%</div>
                <div class="stat-desc" data-i18n="stats.free">ë¬´ë£Œ ì´ìš©</div>
            </div>
            <div class="stat-box">
                <div class="stat-num">5</div>
                <div class="stat-desc" data-i18n="stats.languages">ì§€ì› ì–¸ì–´</div>
            </div>
        </div>

        <!-- Popular - dynamically loaded from app-data.js -->
        <h2 class="section-title" data-i18n="popular.title">ğŸ”¥ ì¸ê¸° ì½˜í…ì¸ </h2>
        <div class="app-grid" id="app-grid"></div>

        <!-- CTA Section -->
        <div class="cta-section">
            <p class="cta-desc" data-i18n="cta.desc">ê²Œì„, ì‹¬ë¦¬í…ŒìŠ¤íŠ¸, í€´ì¦ˆ, ê³„ì‚°ê¸° ë“± ëª¨ë“  ì½˜í…ì¸ ë¥¼ ë§Œë‚˜ë³´ì„¸ìš”</p>
            <a href="/portal/" class="cta-link" id="cta-link" data-i18n="cta.button">ì „ì²´ ì½˜í…ì¸  ë³´ê¸° â†’</a>
        </div>

        <footer class="footer">
            <p data-i18n="footer.copyright">Â© 2026 DopaBrain. All content is free.</p>
            <p style="margin-top:8px"><a href="/portal/privacy-policy.html" data-i18n="footer.privacy">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</a></p>
        </footer>
    </div>

    <!-- i18n Support -->
    <script src="js/i18n.js"></script>

    <!-- App data from portal -->
    <script src="/portal/js/app-data.js"></script>
    <script src="/portal/js/personalize.js"></script>

    <!-- i18n Initialization and App Grid -->
    <script>
    // Render app grid (global for language change re-render)
    function renderAppGrid() {
        if (typeof APP_DATA === 'undefined') return;

        var grid = document.getElementById('app-grid');
        var cta = document.getElementById('cta-link');
        var lang = i18n.getCurrentLanguage();

        var apps = APP_DATA.slice();

        // Try personalized sort first
        if (typeof Personalize !== 'undefined' && Personalize.hasData()) {
            var scored = Personalize.scoreApps(apps);
            if (scored) apps = scored;
        } else {
            // Default: isNew > isPopular
            apps.sort(function(a, b) {
                if (a.isNew && !b.isNew) return -1;
                if (!a.isNew && b.isNew) return 1;
                if (a.isPopular && !b.isPopular) return -1;
                if (!a.isPopular && b.isPopular) return 1;
                return 0;
            });
        }

        var items = apps.slice(0, 12);
        var html = '';
        items.forEach(function(app) {
            var badge = app.isNew ? '<span class="badge-hot">NEW</span>'
                      : app.isPopular ? '<span class="badge-hot">HOT</span>' : '';
            html += '<a href="' + app.url.replace('https://dopabrain.com', '') + '" class="app-card" data-id="' + app.id + '" style="--c:' + app.color + '">'
                + '<div class="app-icon" style="background:linear-gradient(135deg,' + app.color + '33,' + app.color + '11)">' + app.icon + '</div>'
                + '<div><div class="app-name">' + getAppName(app, lang) + ' ' + badge + '</div>'
                + '<div class="app-desc">' + getAppDesc(app, lang) + '</div></div></a>';
        });
        grid.innerHTML = html;

        var ctaText = i18n.t('cta.button');
        cta.textContent = ctaText.replace('â†’', APP_DATA.length + ' â†’');
    }

    // Click tracking for root-domain grid
    document.addEventListener('click', function(e) {
        var card = e.target.closest('.app-card');
        if (card && card.dataset.id && typeof Personalize !== 'undefined') {
            var app = APP_DATA.find(function(a) { return a.id === card.dataset.id; });
            if (app) Personalize.trackClick(card.dataset.id, app.category);
        }
    });

    // i18n initialization
    (async function initI18n() {
        await i18n.loadTranslations(i18n.getCurrentLanguage());
        i18n.updateUI();
        renderAppGrid();

        var langToggle = document.getElementById('lang-toggle');
        var langMenu = document.getElementById('lang-menu');
        var langOptions = document.querySelectorAll('.lang-option');
        var currentLangBtn = document.querySelector('[data-lang="' + i18n.getCurrentLanguage() + '"]');

        if (currentLangBtn) currentLangBtn.classList.add('active');

        langToggle.addEventListener('click', function() {
            langMenu.classList.toggle('hidden');
        });

        document.addEventListener('click', function(e) {
            if (!e.target.closest('.language-selector')) {
                langMenu.classList.add('hidden');
            }
        });

        langOptions.forEach(function(opt) {
            opt.addEventListener('click', async function() {
                await i18n.setLanguage(opt.getAttribute('data-lang'));
                langOptions.forEach(function(o) { o.classList.remove('active'); });
                opt.classList.add('active');
                langMenu.classList.add('hidden');
                renderAppGrid();
            });
        });
    })();
    </script>

    <!-- Google Analytics 4 -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-J8GSWM40TV"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-J8GSWM40TV');
    </script>
</body>
</html>
